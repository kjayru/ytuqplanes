$(document).ready((function(){var i,t,a,s,e;function r(t){a.setLatLng(t.latlng).setContent(this.dataInfoName).openOn(i),i.setView(t.latlng,15),function(i){var t=$(window).width(),a=$(".wrapper-navbar").height(),s=$(".wrapper-first-right-header").outerHeight(),e=a+s-10;t<=480&&(e=a+s);var r=$(i).position().top+e;$(".wrapper-first-right").animate({scrollTop:r},1e3)}(this.dataInfoID)}function p(){$(".wrapper-first-right-list-item").waypoint((function(t){var s,e,r,p;if("down"===t)s=$(this).attr("data-name"),p=[e=parseFloat($(this).attr("data-lat")),r=parseFloat($(this).attr("data-lng"))];else{var l=$(this).prev();s=$(l).attr("data-name"),e=parseFloat($(l).attr("data-lat")),r=parseFloat($(l).attr("data-lng")),isNaN(e)&&(e=parseFloat($(this).attr("data-lat"))),isNaN(r)&&(r=parseFloat($(this).attr("data-lng"))),null==s&&(s=$(this).attr("data-name")),p=[e,r]}a.setLatLng(p).setContent(s).openOn(i),i.setView(p,15)}),{offset:"40%",context:$(".wrapper-first-right")})}function l(){return encodeURIComponent(window.location.href)}function n(){return encodeURIComponent(document.title)}$(window).on("resize",(function(){p()})),$(".wrapper-first-right-body").on("click",".wflitem-title",(function(){let t=[parseFloat($(this).parent().attr("data-lat")),parseFloat($(this).parent().attr("data-lng"))];a.setLatLng(t).setContent($(this).parent().attr("data-name")).openOn(i),i.setView(t,15)})),$(".wrapper-first-right-deals").on("click",".wrapper-first-right-deals-link",(function(){window.location.href=$(this).attr("data-href")})),$(".wrapper-first-right-header").on("click",".wfrhbi-link",(function(){var i,t;$(this).hasClass("fb")?(i="https://www.facebook.com/sharer/sharer.php?u="+l()+"&t="+n(),window.open(i,"_blank")):$(this).hasClass("tw")?(i="https://twitter.com/intent/tweet?text="+n()+"&url="+l(),window.open(i,"_blank")):$(this).hasClass("wa")?(i="https://api.whatsapp.com/send?text="+l(),window.open(i,"_blank")):$(this).hasClass("popup")?(t=$(this).attr("data-id"),$.magnificPopup.open({items:{src:t},type:"inline",fixedContentPos:!0,callbacks:{beforeOpen:function(){this.st.mainClass="mfp-zoom-in"}}})):($(this).hasClass("btn")||$(this).hasClass("download"))&&(i=$(this).attr("data-href"),window.open(i,"_blank"))})),$.getJSON("/api/ApiMapa/"+slugRegion,(function(l,n){var o,d=$.grep(l,(function(i,t){return i.url==slugRuta}));o="",o+="<div class='wrapper-navbar-container'>",o+="<div class='wrapper-navbar-left'>",o+='<a class="wrapper-navbar-link" href="/rutas-cortas/'+slugRegion+"/"+slugRuta+'">',o+="<i class='fa fa-long-arrow-left'></i>Rutas cortas desde "+d[0].region,o+="</a>",o+="</div>",o+="<div class='wrapper-navbar-right'>",o+='<a class="wrapper-navbar-link" href="/rutas-cortas/'+slugRegion+"/"+slugRuta+'">',o+="<i class='fa fa-times'></i>",o+="</div>",o+="</div>",o+="</div>",$(".wrapper-navbar").append(o),function(i){var t="";t+="<h1>"+i[0].name+"</h1>",t+="<h2><i class='fa fa-map-marker'></i>"+i[0].region+"</h2>",t+="<div class='wrapper-first-right-header-buttons'>",t+="<div class='wrapper-first-right-header-buttons-left'>",t+="<div class='wrapper-first-right-header-buttons-item'>",t+="<label>Compartir:</label>",t+="<ul>",t+="<li class='wfrhbi-link fb'><i class='fa fa-facebook'></i></li>",t+="<li class='wfrhbi-link tw'><i class='fa fa-twitter'></i></li>",t+="<li class='wfrhbi-link wa'><i class='fa fa-whatsapp'></i></li>",t+="</ul>",t+="</div>",t+="<div class='wrapper-first-right-header-buttons-item'>",t+="<p class='wfrhbi-link popup' data-id='#datos-utiles'><i class='fa fa-info-circle'></i>Datos útiles</p>",t+="</div>",t+="</div>",(null!=i[0].google&&""!=i[0].google||null!=i[0].pdf&&""!=i[0].pdf)&&(t+="<div class='wrapper-first-right-header-buttons-right'>",null!=i[0].google&&""!=i[0].google&&(t+="<div class='wrapper-first-right-header-buttons-item'>",t+="<p class='wfrhbi-link btn' data-href='"+i[0].google+"'><i class='fa fa-map-marker'></i>Ubicar en Google Maps</p>",t+="</div>"),null!=i[0].pdf&&""!=i[0].pdf&&(t+="<div class='wrapper-first-right-header-buttons-item'>",t+="<p class='wfrhbi-link download' data-href='"+i[0].pdf+"'><i class='fa fa-download'></i>Descargar Ruta en PDF</p>",t+="</div>"),t+="</div>");t+="</div>",$(".wrapper-first-right-header").append(t)}(d),function(l){if(l[0].places.length>0){var n=_(l[0].places).orderBy(["order"],["asc"]).value();$(".wrapper-first-right-body").append("<h2>¿Qué visitar?</h2>");var o="";o+="<div class='wrapper-first-right-list'>";var d=0;for(var c in n){if(o+="<div class='wrapper-first-right-list-item' id='map-section-"+ ++d+"' data-name='"+n[c].name+"' data-lat='"+n[c].cordinate[0].latitude+"' data-lng='"+n[c].cordinate[0].longitude+"'>",o+="<h3 class='wflitem-title'>",o+="<span>"+d+"</span><label>"+n[c].name+"</label>",o+="</h3>",""!=n[c].height&&(o+="<p class='wflitem-height'>"+n[c].height+"</p>"),n[c].activity.length>0){for(var f in o+="<h4 class='wflitem-activity-title'>Actividades</h4>",o+="<ul class='wflitem-activity-list'>",n[c].activity)o+="<li>",o+="<img src='"+n[c].activity[f].icon+"' />",o+="<span>"+n[c].activity[f].name+"</span>",o+="</li>";o+="</ul>"}if(n[c].apt.length>0){for(var h in o+="<h4 class='wflitem-apt-title'>Recomendado</h4>",o+="<ul class='wflitem-apt-list'>",n[c].apt)o+="<li>"+n[c].apt[h].description+"</li>";o+="</ul>"}""!=n[c].description&&(o+="<p class='wflitem-apt-description'>"+n[c].description+"</p>"),""!=n[c].image&&null!=n[c].image&&(o+="<div class='wflitem-image' style='background-image: url("+n[c].image+");'></div>"),o+="</div>"}o+="</div>",$(".wrapper-first-right-body").append(o),p(),function(p){i=L.map("wfl-map").setView([-9.875092,-74.462691],6),L.tileLayer("https://tile.jawg.io/jawg-streets/{z}/{x}/{y}.png?access-token=V7U7oRrvposrjdIyg8bIlT3OPAr6LFrxniHQtdZ2P9RTuFKZf96V6h8ErKkia2JY",{}).addTo(i),a=L.popup({offset:[0,-35]}),e=L.latLngBounds();var l=0;for(var n in p)for(var o in l++,p[n].cordinate){s=L.ExtraMarkers.icon({shape:"square",markerColor:"violet",prefix:"",icon:"fa-number",iconColor:"#fff",number:l.toString()});let a=[parseFloat(p[n].cordinate[o].latitude),parseFloat(p[n].cordinate[o].longitude)];(t=new L.marker(a,{icon:s}).addTo(i).on("click",r)).dataInfoID="#map-section-"+l,t.dataInfoName=p[n].name,e.extend(a)}i.fitBounds(e)}(n)}else $(".wrapper-first-right-body").hide()}(d),function(i){$("#datos-utiles").addClass("white-popup mfp-with-anim mfp-hide");var t="";if(t+="<div class='wc-popup-content'>",t+="<div class='wc-popup-content-border'>",t+="<div class='wc-popup-item'>",t+="<h2><i class='fa fa-info-circle'></i>Datos útiles</h2>",t+="<button type='button' class='mfp-close'>×</button>",t+="</div>",i[0].car.length>0||i[0].bus.length>0||i[0].airplane.length>0||i[0].train.length>0||i[0].ship.length>0){if(t+="<div class='wc-popup-item'>",t+="<h3>¿Cómo ir?</h3>",t+="<div class='wc-popup-first'>",i[0].car.length>0){for(var a in t+="<div class='wc-popup-first-item'>",t+="<div class='wc-popup-first-item-left'>",t+="<img src='/assets/images/mapa/etc/car.png' />",t+="</div>",t+="<div class='wc-popup-first-item-right'>",t+="<ul>",i[0].car)t+="<li>"+i[0].car[a].description+"</li>";t+="</ul>",t+="</div>",t+="</div>"}if(i[0].bus.length>0){for(var s in t+="<div class='wc-popup-first-item'>",t+="<div class='wc-popup-first-item-left'>",t+="<img src='/assets/images/mapa/etc/bus.png' />",t+="</div>",t+="<div class='wc-popup-first-item-right'>",t+="<ul>",i[0].bus)t+="<li>"+i[0].bus[s].description+"</li>";t+="</ul>",t+="</div>",t+="</div>"}if(i[0].train.length>0){for(var e in t+="<div class='wc-popup-first-item'>",t+="<div class='wc-popup-first-item-left'>",t+="<img src='/assets/images/mapa/etc/train.png' />",t+="</div>",t+="<div class='wc-popup-first-item-right'>",t+="<ul>",i[0].train)t+="<li>"+i[0].train[e].description+"</li>";t+="</ul>",t+="</div>",t+="</div>"}if(i[0].ship.length>0){for(var r in t+="<div class='wc-popup-first-item'>",t+="<div class='wc-popup-first-item-left'>",t+="<img src='/assets/images/mapa/etc/ship.png' />",t+="</div>",t+="<div class='wc-popup-first-item-right'>",t+="<ul>",i[0].ship)t+="<li>"+i[0].ship[r].description+"</li>";t+="</ul>",t+="</div>",t+="</div>"}if(i[0].airplane.length>0){for(var p in t+="<div class='wc-popup-first-item'>",t+="<div class='wc-popup-first-item-left'>",t+="<img src='/assets/images/mapa/etc/plane.png' />",t+="</div>",t+="<div class='wc-popup-first-item-right'>",t+="<ul>",i[0].airplane)t+="<li>"+i[0].airplane[p].description+"</li>";t+="</ul>",t+="</div>",t+="</div>"}t+="</div>",t+="</div>"}""==i[0].maximumWeather&&""==i[0].minimumWeather||(t+="<div class='wc-popup-item'>",t+="<div class='wc-popup-second'>",t+="<div class='wc-popup-second-left'>",t+="<div class='wc-popup-second-left-left'>",t+="<h3>Clima</h3>",t+="</div>",t+="<div class='wc-popup-second-left-right'>",t+="<div class='wc-popup-second-left-right-icon'>",t+="<img src='/assets/images/mapa/etc/thermometer.png' />",t+="</div>",t+="<div class='wc-popup-second-left-right-text'>",""!=i[0].maximumWeather&&(t+="<p>"+i[0].maximumWeather+" máx.</p>"),""!=i[0].minimumWeather&&(t+="<p>"+i[0].minimumWeather+" mín.</p>"),t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>");t+="</div>",t+="</div>",$("#datos-utiles").html(t)}(d)})),function(i){if(i){var t="";t+="<h2>¡Descubre "+i[0]+"!</h2>",t+="<div class='wrapper-first-right-deals-link' data-href='"+i[1]+"'>Ver ofertas</div>",$(".wrapper-first-right-deals").append(t)}else $(".wrapper-first-right-deals").hide()}([nombreProvincia,urlOfertas])}));