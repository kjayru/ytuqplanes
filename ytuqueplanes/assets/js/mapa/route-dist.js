$(document).ready((function(){var i,a,t,e,s;function r(a){t.setLatLng(a.latlng).setContent(this.dataInfoName).openOn(i),i.setView(a.latlng,15),function(i){var a=$(window).width(),t=$(".wrapper-navbar").height(),e=$(".wrapper-first-right-header").outerHeight(),s=t+e-10;a<=480&&(s=t+e);var r=$(i).position().top+s;$(".wrapper-first-right").animate({scrollTop:r},1e3)}(this.dataInfoID)}function n(){$(".wrapper-first-right-list-item").waypoint((function(a){var e,s,r,n;if("down"===a)e=$(this).attr("data-name"),n=[s=parseFloat($(this).attr("data-lat")),r=parseFloat($(this).attr("data-lng"))];else{var p=$(this).prev();e=$(p).attr("data-name"),s=parseFloat($(p).attr("data-lat")),r=parseFloat($(p).attr("data-lng")),isNaN(s)&&(s=parseFloat($(this).attr("data-lat"))),isNaN(r)&&(r=parseFloat($(this).attr("data-lng"))),null==e&&(e=$(this).attr("data-name")),n=[s,r]}t.setLatLng(n).setContent(e).openOn(i),i.setView(n,15)}),{offset:"40%",context:$(".wrapper-first-right")})}function p(){return encodeURIComponent(window.location.href)}function l(){return encodeURIComponent(document.title)}$(".wrapper-navbar").on("click",".wrapper-navbar-link",(function(){window.location.href=$(this).attr("data-href")})),$(".wrapper-navbar").on("click",".fnBackToUrl",(function(i){i.preventDefault(),window.history.back()})),$(window).on("resize",(function(){n()})),$(".wrapper-first-right-body").on("click",".wflitem-title",(function(){let a=[parseFloat($(this).parent().attr("data-lat")),parseFloat($(this).parent().attr("data-lng"))];t.setLatLng(a).setContent($(this).parent().attr("data-name")).openOn(i),i.setView(a,15)})),$(".wrapper-first-right-deals").on("click",".wrapper-first-right-deals-link",(function(){window.location.href=$(this).attr("data-href")})),$(".wrapper-first-right-header").on("click",".wfrhbi-link",(function(){var i,a;$(this).hasClass("fb")?(i="https://www.facebook.com/sharer/sharer.php?u="+p()+"&t="+l(),window.open(i,"_blank")):$(this).hasClass("tw")?(i="https://twitter.com/intent/tweet?text="+l()+"&url="+p(),window.open(i,"_blank")):$(this).hasClass("wa")?(i="https://api.whatsapp.com/send?text="+p(),window.open(i,"_blank")):$(this).hasClass("popup")?(a=$(this).attr("data-id"),$.magnificPopup.open({items:{src:a},type:"inline",fixedContentPos:!0,callbacks:{beforeOpen:function(){this.st.mainClass="mfp-zoom-in"}}})):$(this).hasClass("btn")?(i=$(this).attr("data-href"),window.open(i,"_blank")):$(this).hasClass("download")&&(i="../../"+$(this).attr("data-href"),window.open(i,"_blank"))})),$.getJSON("/api/ApiMapa/"+slugRegion,(function(p,l){var o,d=$.grep(p,(function(i,a){return i.url==slugRuta}));o="",o+="<div class='wrapper-navbar-container'>",o+="<div class='wrapper-navbar-left'>",o+="<div class='wrapper-navbar-link fnBackToUrl'>",o+="<i class='fa fa-long-arrow-left'></i>Rutas cortas desde "+d[0].region,o+="</div>",o+="</div>",o+="<div class='wrapper-navbar-right'>",o+="<div class='wrapper-navbar-link fnBackToUrl'>",o+="<i class='fa fa-times'></i>",o+="</div>",o+="</div>",o+="</div>",$(".wrapper-navbar").append(o),function(i){var a="";a+="<h1>"+i[0].name+"</h1>",a+="<h2><i class='fa fa-map-marker'></i>"+i[0].region+"</h2>",a+="<div class='wrapper-first-right-header-buttons'>",a+="<div class='wrapper-first-right-header-buttons-left'>",a+="<div class='wrapper-first-right-header-buttons-item'>",a+="<label>Compartir:</label>",a+="<ul>",a+="<li class='wfrhbi-link fb'><i class='fa fa-facebook'></i></li>",a+="<li class='wfrhbi-link tw'><i class='fa fa-twitter'></i></li>",a+="<li class='wfrhbi-link wa'><i class='fa fa-whatsapp'></i></li>",a+="</ul>",a+="</div>",a+="<div class='wrapper-first-right-header-buttons-item'>",a+="<p class='wfrhbi-link popup' data-id='#datos-utiles'><i class='fa fa-info-circle'></i>Datos útiles</p>",a+="</div>",a+="</div>",(null!=i[0].google&&""!=i[0].google||null!=i[0].pdf&&""!=i[0].pdf)&&(a+="<div class='wrapper-first-right-header-buttons-right'>",null!=i[0].google&&""!=i[0].google&&(a+="<div class='wrapper-first-right-header-buttons-item'>",a+="<p class='wfrhbi-link btn' data-href='"+i[0].google+"'><i class='fa fa-map-marker'></i>Ubicar en Google Maps</p>",a+="</div>"),null!=i[0].pdf&&""!=i[0].pdf&&(a+="<div class='wrapper-first-right-header-buttons-item'>",a+="<p class='wfrhbi-link download' data-href='"+i[0].pdf+"'><i class='fa fa-download'></i>Descargar Ruta en PDF</p>",a+="</div>"),a+="</div>");a+="</div>",$(".wrapper-first-right-header").append(a)}(d),function(p){if(p[0].places.length>0){var l=_(p[0].places).orderBy(["order"],["asc"]).value();$(".wrapper-first-right-body").append("<h2>¿Qué visitar?</h2>");var o="";o+="<div class='wrapper-first-right-list'>";var d=0;for(var c in l){if(o+="<div class='wrapper-first-right-list-item' id='map-section-"+ ++d+"' data-name='"+l[c].name+"' data-lat='"+l[c].cordinate[0].latitude+"' data-lng='"+l[c].cordinate[0].longitude+"'>",o+="<h3 class='wflitem-title'>",o+="<span>"+d+"</span><label>"+l[c].name+"</label>",o+="</h3>",""!=l[c].height&&(o+="<p class='wflitem-height'>"+l[c].height+"</p>"),l[c].activity.length>0){for(var f in o+="<h4 class='wflitem-activity-title'>Actividades</h4>",o+="<ul class='wflitem-activity-list'>",l[c].activity)o+="<li>",o+="<img src='/"+l[c].activity[f].icon+"' />",o+="<span>"+l[c].activity[f].name+"</span>",o+="</li>";o+="</ul>"}if(l[c].apt.length>0){for(var h in o+="<h4 class='wflitem-apt-title'>Recomendado</h4>",o+="<ul class='wflitem-apt-list'>",l[c].apt)o+="<li>"+l[c].apt[h].description+"</li>";o+="</ul>"}""!=l[c].description&&(o+="<p class='wflitem-apt-description'>"+l[c].description+"</p>"),""!=l[c].image&&null!=l[c].image&&(o+="<div class='wflitem-image' style='background-image: url("+l[c].image+");'></div>"),o+="</div>"}o+="</div>",$(".wrapper-first-right-body").append(o),n(),function(n){i=L.map("wfl-map").setView([-9.875092,-74.462691],6),L.tileLayer("https://tile.jawg.io/jawg-streets/{z}/{x}/{y}.png?access-token=V7U7oRrvposrjdIyg8bIlT3OPAr6LFrxniHQtdZ2P9RTuFKZf96V6h8ErKkia2JY",{}).addTo(i),t=L.popup({offset:[0,-35]}),s=L.latLngBounds();var p=0;for(var l in n)for(var o in p++,n[l].cordinate){e=L.ExtraMarkers.icon({shape:"square",markerColor:"violet",prefix:"",icon:"fa-number",iconColor:"#fff",number:p.toString()});let t=[parseFloat(n[l].cordinate[o].latitude),parseFloat(n[l].cordinate[o].longitude)];(a=new L.marker(t,{icon:e}).addTo(i).on("click",r)).dataInfoID="#map-section-"+p,a.dataInfoName=n[l].name,s.extend(t)}i.fitBounds(s)}(l)}else $(".wrapper-first-right-body").hide()}(d),function(i){$("#datos-utiles").addClass("white-popup mfp-with-anim mfp-hide");var a="";if(a+="<div class='wc-popup-content'>",a+="<div class='wc-popup-content-border'>",a+="<div class='wc-popup-item'>",a+="<h2><i class='fa fa-info-circle'></i>Datos útiles</h2>",a+="<button type='button' class='mfp-close'>×</button>",a+="</div>",i[0].car.length>0||i[0].bus.length>0||i[0].airplane.length>0||i[0].train.length>0||i[0].ship.length>0){if(a+="<div class='wc-popup-item'>",a+="<h3>¿Cómo ir?</h3>",a+="<div class='wc-popup-first'>",i[0].car.length>0){for(var t in a+="<div class='wc-popup-first-item'>",a+="<div class='wc-popup-first-item-left'>",a+="<img src='/assets/images/mapa/etc/car.png' />",a+="</div>",a+="<div class='wc-popup-first-item-right'>",a+="<ul>",i[0].car)a+="<li>"+i[0].car[t].description+"</li>";a+="</ul>",a+="</div>",a+="</div>"}if(i[0].bus.length>0){for(var e in a+="<div class='wc-popup-first-item'>",a+="<div class='wc-popup-first-item-left'>",a+="<img src='/assets/images/mapa/etc/bus.png' />",a+="</div>",a+="<div class='wc-popup-first-item-right'>",a+="<ul>",i[0].bus)a+="<li>"+i[0].bus[e].description+"</li>";a+="</ul>",a+="</div>",a+="</div>"}if(i[0].train.length>0){for(var s in a+="<div class='wc-popup-first-item'>",a+="<div class='wc-popup-first-item-left'>",a+="<img src='/assets/images/mapa/etc/train.png' />",a+="</div>",a+="<div class='wc-popup-first-item-right'>",a+="<ul>",i[0].train)a+="<li>"+i[0].train[s].description+"</li>";a+="</ul>",a+="</div>",a+="</div>"}if(i[0].ship.length>0){for(var r in a+="<div class='wc-popup-first-item'>",a+="<div class='wc-popup-first-item-left'>",a+="<img src='/assets/images/mapa/etc/ship.png' />",a+="</div>",a+="<div class='wc-popup-first-item-right'>",a+="<ul>",i[0].ship)a+="<li>"+i[0].ship[r].description+"</li>";a+="</ul>",a+="</div>",a+="</div>"}if(i[0].airplane.length>0){for(var n in a+="<div class='wc-popup-first-item'>",a+="<div class='wc-popup-first-item-left'>",a+="<img src='/assets/images/mapa/etc/plane.png' />",a+="</div>",a+="<div class='wc-popup-first-item-right'>",a+="<ul>",i[0].airplane)a+="<li>"+i[0].airplane[n].description+"</li>";a+="</ul>",a+="</div>",a+="</div>"}a+="</div>",a+="</div>"}""==i[0].maximumWeather&&""==i[0].minimumWeather||(a+="<div class='wc-popup-item'>",a+="<div class='wc-popup-second'>",a+="<div class='wc-popup-second-left'>",a+="<div class='wc-popup-second-left-left'>",a+="<h3>Clima</h3>",a+="</div>",a+="<div class='wc-popup-second-left-right'>",a+="<div class='wc-popup-second-left-right-icon'>",a+="<img src='/assets/images/mapa/etc/thermometer.png' />",a+="</div>",a+="<div class='wc-popup-second-left-right-text'>",""!=i[0].maximumWeather&&(a+="<p>"+i[0].maximumWeather+" máx.</p>"),""!=i[0].minimumWeather&&(a+="<p>"+i[0].minimumWeather+" mín.</p>"),a+="</div>",a+="</div>",a+="</div>",a+="</div>",a+="</div>");a+="</div>",a+="</div>",$("#datos-utiles").html(a)}(d)})),function(i){if(i){var a="";a+="<h2>¡Descubre "+i[0]+"!</h2>",a+="<div class='wrapper-first-right-deals-link' data-href='"+i[1]+"'>Ver ofertas</div>",$(".wrapper-first-right-deals").append(a)}else $(".wrapper-first-right-deals").hide()}([nombreProvincia,urlOfertas])}));